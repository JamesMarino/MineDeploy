{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Parameters": {
    "HostName": {
      "Type": "String",
      "Description": "Hostname"
    },
    "AvailabilityZone": {
      "Type": "String",
      "Description": "Availability Zone"
    },
    "MineDeployVolumeName": {
      "Type": "String",
      "Description": "Unique Volume Name"
    },
    "KeyName": {
      "Type": "String",
      "Description": "Key Name for EC2 Connection"
    }
  },
  "Resources": {
    "MinecraftNetworking": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "TemplateURL": "./stacks/minecraft.networking.stack.json",
        "Parameters": {
          "AvailabilityZone": {
            "Ref": "AvailabilityZone"
          }
        }
      }
    },
    "MinecraftServices": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "TemplateURL": "./stacks/minecraft.services.stack.json",
        "Parameters": {
          "HostName": {
            "Ref": "HostName"
          },
          "MineDeployVolumeName": {
            "Ref": "MineDeployVolumeName"
          },
          "KeyName": {
            "Ref": "KeyName"
          },
          "MineDeployVPC": {
            "Fn::GetAtt": ["MinecraftNetworking", "Outputs.MineDeployVPC"]
          },
          "MineDeploySubnet": {
            "Fn::GetAtt": ["MinecraftNetworking", "Outputs.MineDeploySubnet"]
          },
          "AvailabilityZone": {
            "Ref": "AvailabilityZone"
          }
        }
      }
    }
  }
}
